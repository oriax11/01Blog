<div class="article-detail-container" *ngIf="article">
  <article class="article">
    <header class="article-header">
      <div>
        <div class="article-meta">
          <span class="date">{{ article.createdAt | date : 'MMMM dd, yyyy' }}</span>
        </div>

        <h1 class="article-title">{{ article.title }}</h1>

        <div class="author-info" (click)="goToAuthorProfile()" style="cursor: pointer">
          <img (click)="goToAuthorProfile()" [src]="
    article.creator.avatarUrl ||
    'https://api.dicebear.com/7.x/avataaars/svg?seed=' + article.creator.username
  " [alt]="article.creator.username" class="author-avatar" />
          <div class="author-details">
            <span class="author-name">{{ article.creator.username }}</span>
            <span class="read-time">5 min read</span>
          </div>
        </div>
      </div>
      <div class="dropdown">
        <button class="dropdown-toggle" (click)="toggleDropdown($event)">
          <svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 24 24">
            <title>Three Dots Dropdown</title>
            <circle cx="12" cy="12" r="10" fill="none" stroke="#00A550" stroke-width="2" />
            <circle cx="8" cy="12" r="1.2" fill="#00A550" />
            <circle cx="12" cy="12" r="1.2" fill="#00A550" />
            <circle cx="16" cy="12" r="1.2" fill="#00A550" />
          </svg>
        </button>
        <div class="dropdown-menu" *ngIf="isDropdownOpen">
          <a class="dropdown-item" *ngIf="isAuthor()" (click)="edit($event)">Edit</a>
          <a class="dropdown-item" *ngIf="isAuthor()" (click)="delete($event)">Delete</a>
          <a class="dropdown-item" *ngIf="!isAuthor()" (click)="report($event)">Report</a>
        </div>
      </div>
    </header>



    <div class="article-content" class="ql-editor" [innerHTML]="article.content"></div>

    <footer class="article-footer">
      <div class="article-stats">
        <button class="stat-btn like-btn" (click)="toggleLike()" [class.liked]="article.isLiked">
          <svg class="comment-like-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 122.88 114.44">
            <path
              d="M65.46,19.57c-0.68,0.72-1.36,1.45-2.2,2.32l-2.31,2.41l-2.4-2.33c-0.71-0.69-1.43-1.4-2.13-2.09 c-7.42-7.3-13.01-12.8-24.52-12.95c-0.45-0.01-0.93,0-1.43,0.02c-6.44,0.23-12.38,2.6-16.72,6.65c-4.28,4-7.01,9.67-7.1,16.57 c-0.01,0.43,0,0.88,0.02,1.37c0.69,19.27,19.13,36.08,34.42,50.01c2.95,2.69,5.78,5.27,8.49,7.88l11.26,10.85l14.15-14.04 c2.28-2.26,4.86-4.73,7.62-7.37c4.69-4.5,9.91-9.49,14.77-14.52c3.49-3.61,6.8-7.24,9.61-10.73c2.76-3.42,5.02-6.67,6.47-9.57 c2.38-4.76,3.13-9.52,2.62-13.97c-0.5-4.39-2.23-8.49-4.82-11.99c-2.63-3.55-6.13-6.49-10.14-8.5C96.5,7.29,91.21,6.2,85.8,6.82 C76.47,7.9,71.5,13.17,65.46,19.57L65.46,19.57z M60.77,14.85C67.67,7.54,73.4,1.55,85.04,0.22c6.72-0.77,13.3,0.57,19.03,3.45 c4.95,2.48,9.27,6.1,12.51,10.47c3.27,4.42,5.46,9.61,6.1,15.19c0.65,5.66-0.29,11.69-3.3,17.69c-1.7,3.39-4.22,7.03-7.23,10.76 c-2.95,3.66-6.39,7.44-10,11.17C97.2,74.08,91.94,79.12,87.2,83.66c-2.77,2.65-5.36,5.13-7.54,7.29L63.2,107.28l-2.31,2.29 l-2.34-2.25l-13.6-13.1c-2.49-2.39-5.37-5.02-8.36-7.75C20.38,71.68,0.81,53.85,0.02,31.77C0,31.23,0,30.67,0,30.09 c0.12-8.86,3.66-16.18,9.21-21.36c5.5-5.13,12.97-8.13,21.01-8.42c0.55-0.02,1.13-0.03,1.74-0.02C46,0.48,52.42,6.63,60.77,14.85 L60.77,14.85z" />
          </svg>
          <span class="stat">{{ article.likeCount }}</span>
        </button>

        <!-- <button class="stat-btn comment-btn">
          <svg class="comment-like-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 122.88 114.44">
            <path
              d="M34.75,35.84A6.72,6.72,0,1,1,28,42.56a6.72,6.72,0,0,1,6.72-6.72ZM7,0H115.91a7,7,0,0,1,7,7V79.86a7,7,0,0,1-7,7H62.55L36.14,106.45c-5,4.76-9.47,7.76-12.88,8-5,.3-7.61-3.1-7-11.56v-16H7a7,7,0,0,1-7-7V7A7,7,0,0,1,7,0ZM115.91,6.8H7A.17.17,0,0,0,6.8,7V79.86A.17.17,0,0,0,7,80H19.64a3.4,3.4,0,0,1,3.4,3.4v19.49h0a2.09,2.09,0,0,1,0,.25c-.23,3.15-.27,4.48-.17,4.47,1.67-.10,4.77-2.46,8.75-6.24l.32-.26L59.2,80.87A3.36,3.36,0,0,1,61.44,80h54.47a.17.17,0,0,0,.17-.17V7a.17.17,0,0,0-.17-.17Zm-55.47,29a6.72,6.72,0,1,1-6.73,6.72,6.72,6.72,0,0,1,6.73-6.72Zm25.69,0a6.72,6.72,0,1,1-6.73,6.72,6.72,6.72,0,0,1,6.73-6.72Z" />
          </svg>
          <span class="stat">{{ article.commentsCount }}</span>
        </button> -->
      </div>
    </footer>
    <app-comment-section [postId]="article.id"></app-comment-section>
  </article>

  <div class="modal-backdrop" *ngIf="showDeleteModal">
    <div class="modal-container">
      <div class="modal-header">
        <h2 class="modal-title">
          Delete <span class="accent">Article</span>
        </h2>
        <button class="close-btn" (click)="cancelDelete()" type="button">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="18" y1="6" x2="6" y2="18"></line>
            <line x1="6" y1="6" x2="18" y2="18"></line>
          </svg>
        </button>
      </div>

      <div class="modal-body">
        <p class="modal-description">
          Are you sure you want to delete this Post?
        </p>

        <div class="modal-footer">
          <button type="button" class="btn btn-cancel" (click)="cancelDelete()">
            Cancel
          </button>
          <button type="button" class="btn btn-submit" (click)="confirmDelete()">
            Delete
          </button>
        </div>
      </div>
    </div>
  </div>







  <app-report-modal [isOpen]="showReportModal" reportType="post" [targetTitle]="article.title" (close)="onReportClose()"
    (submit)="onReportSubmit($event)"></app-report-modal>
</div>