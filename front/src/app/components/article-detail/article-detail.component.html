<div class="article-detail-container" *ngIf="article">
  <article class="article">
    <header class="article-header">
      <div>
        <div class="article-meta">
          <span class="date">{{ article.createdAt | date : 'MMMM dd, yyyy' }}</span>
        </div>

        <h1 class="article-title">{{ article.title }}</h1>

        <div class="author-info" (click)="goToAuthorProfile()" style="cursor: pointer">
          <img (click)="goToAuthorProfile()" [src]="
    article.creator.avatarUrl ||
    'https://api.dicebear.com/7.x/avataaars/svg?seed=' + article.creator.username
  " [alt]="article.creator.username" class="author-avatar" />
          <div class="author-details">
            <span class="author-name">{{ article.creator.username }}</span>
            <span class="read-time">5 min read</span>
          </div>
        </div>
      </div>
      <div class="dropdown">
        <button class="dropdown-toggle" (click)="toggleDropdown($event)">
          <svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 24 24">
            <title>Three Dots Dropdown</title>
            <circle cx="12" cy="12" r="10" fill="none" stroke="#00A550" stroke-width="2" />
            <circle cx="8" cy="12" r="1.2" fill="#00A550" />
            <circle cx="12" cy="12" r="1.2" fill="#00A550" />
            <circle cx="16" cy="12" r="1.2" fill="#00A550" />
          </svg>
        </button>
        <div class="dropdown-menu" *ngIf="isDropdownOpen">
          <a class="dropdown-item" *ngIf="isAuthor()" (click)="edit($event)">Edit</a>
          <a class="dropdown-item" *ngIf="isAuthor()" (click)="delete($event)">Delete</a>
          <a class="dropdown-item" *ngIf="!isAuthor()" (click)="report($event)">Report</a>
        </div>
      </div>
    </header>



    <div class="article-content" class="ql-editor" [innerHTML]="article.content"></div>

    <footer class="article-footer">
      <div class="article-stats">
        <button class="stat-btn"> {{ article.likeCount }}</button>
        <button class="stat-btn"> {{ article.commentsCount }}</button>
      </div>
    </footer>
    <app-comment-section [postId]="article.id"></app-comment-section>
  </article>

  <div class="modal-backdrop" *ngIf="showDeleteModal">
    <div class="modal-container">
      <div class="modal-header">
        <h2 class="modal-title">
          Delete <span class="accent">Article</span>
        </h2>
        <button class="close-btn" (click)="cancelDelete()" type="button">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="18" y1="6" x2="6" y2="18"></line>
            <line x1="6" y1="6" x2="18" y2="18"></line>
          </svg>
        </button>
      </div>

      <div class="modal-body">
        <p class="modal-description">
          Are you sure you want to delete this Post?
        </p>

        <div class="modal-footer">
          <button type="button" class="btn btn-cancel" (click)="cancelDelete()">
            Cancel
          </button>
          <button type="button" class="btn btn-submit" (click)="confirmDelete()">
            Delete
          </button>
        </div>
      </div>
    </div>
  </div>







  <app-report-modal [isOpen]="showReportModal" reportType="post" [targetTitle]="article.title" (close)="onReportClose()"
    (submit)="onReportSubmit($event)"></app-report-modal>
</div>